<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>葡萄藤PPT</title>

    <link rel="stylesheet" href="https://ptteng.github.io/PPT/css/reveal/reveal.css">

    <!-- PPT主题，可以在/css/reveal/theme/中选择其他主题，目前暂时只能使用该模板 -->
    <link rel="stylesheet" href="https://ptteng.github.io/PPT/css/reveal/theme/ptt.css">

    <!-- syntax highlighting 代码高亮主题 -->
    <link rel="stylesheet" href="https://ptteng.github.io/PPT/lib/reveal/css/zenburn.css">

    <style>
        .float {
            float: left;
        }

        p.font {
            text-align: left;
        }
    </style>


    <!-- 打印和PDF输出样式 -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ?
            'https://ptteng.github.io/PPT/css/reveal/print/pdf.css' : '../css/reveal/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>

<body>
    <img src="img/demo/logo.png" alt="" usemap="#pttmap" class="base-logo">
    <map name="pttmap">
        <area shape="rect" coords="0,0,276,58" href="http://www.jnshu.com" alt="" target="_blank" />
    </map>
    <div class="reveal">
        <div class="slides">
            <section>
                <h2>【JS-06】登录之后，在其他页面怎么判断是否已经登录？</h2>
                <p style="text-align: center;">分享人：朱士峰</p>
            </section>
            <section>
                <p>目录</p>
                <p>1.背景介绍</p>
                <p>2.知识剖析</p>
                <p>3.常见问题</p>
                <p>4.解决方案</p>
                <p>5.编码实战</p>
                <p>6.扩展思考</p>
                <p>7.参考文献</p>
                <p>8.更多讨论</p>
            </section>
            <section>
                <h3>一、背景介绍</h3>
            </section>
            <section>
                <P class="font">登录功能，是前端经常要完成的需求之一。

                    一个 网站有很多的操作是必须要用户登陆才能进行操作的

                    那么如何进行登录判断？

                    需要用到什么样的属性或者方法？

                    有什么地方的细节需要注意？

                    以上这些，都是本次小课堂要讲解的重点！</P>
            </section>




            <section>
                <h3>二、知识剖析</h3>
            </section>

            <section>
                <h4>登陆验证的方法</h4>
                <p>通过在登陆时记录一个数据，然后在需要进行登陆验证的页面比较此数据，若数据与登陆时记录的数据相符，
                    则通过验证，否则不通过验证。这要求此数据是稳定的，不随url的变化而改变。即本地存储的方法。</p>
            </section>
            <section>
                <p class="font">如果想要实现登陆判断，就要有一个判断的依据。

                    首先，这个依据在我们访问网站的过程中不会失效，

                    其次，这个依据要能存储一定的信息，以提供必要的判断，

                    同时满足这两个条件有Storage和cookies</p>
            </section>


            <section>
                <p class="font">Web Storage

                    WebStorage是HTML5中本地存储的解决方案之一

                    Web Storage实际上由两部分组成:sessionStorage与localStorage。</p>
            </section>

            <section>
                <p>localStorage和sessionStorage</p>
                <p>localStorage用于持久化的本地存储，除非主动删除数据，否则数据是永远不会过期的。</p>
                <p>sessionStorage存储的数据只在会话期间有效，关闭浏览器则自动删除。</p>
            </section>

            <section>
                <p class="font">什么是COOKIE</p>
                <p>首先，cookie,sessionStorage和localStorage，都是web存储里面的知识点，虽然都是网页数据存储，但他们产生的先后顺序和应用是不同的。</p>
                <p>cookie有时也用cookies。网景公司发展的一种机制，Cookie是由服务器端生成，发送给浏览器，浏览器会将Cookie的key/value保存到某个目录下的文本文件内，
                    下次请求同一网站时就发送该Cookie给服务器（前提是浏览器设置为启用cookie）。Cookie名称和值可以由服务器端开发自己定义，服务器可以设置或读取Cookies中包含信息，借此维护用户跟服务器会话中的状态。目前，cookie已经成为一种标准，所有的主流浏览器如IE、chrome、Firefox、Opera等都支持Cookie。</p>


                <pre>
                    <code class="hljs javascript">
                            <!--// 定义一个模块-->

       </code>
            </pre>
            </section>




            <section>
                <h3>三、常见问题</h3>
            </section>
            <section>
                <p>1、各种验证的使用方法？</p>
                <p>2、为什么不用cookie？</p>

            </section>


            <section>
                <h3>四、解决方案</h3>
            </section>

            <section>
                <p>COOKIES</p>
                <pre>
                        <code class="hljs javascript">
                                        <!--// 定义一个模块-->
        //设置cookie
        document.cookie  = 'name=xiaoyu'
        //编辑cookie
        document.cookie= 'name=desu'
        //获取cookie某一项的值
        function getCookie(name) {
            var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
            if (arr = document.cookie.match(reg)) {
                console.log(document.cookie.match(reg));
                return encodedURI(arr[2]);
            } else {
                return null;
            }
        }
                   </code>
                        </pre>
            </section>


            <section>
                <h3>SESSION进行的身份验证过程</h3>
                <p>开启了Session支持的服务器在客户端开始会话的时候，生成一个SessionID，并且在响应（Response）头（Headers）中的Set-Cookie字段设置一个Cookie，
                    Cookie的内容就是SessionID和Cookie的路径（path），在后继的会话中，客户端浏览器会自动附上Set-Cookie中的SessionID以向服务器表明身份，
                    服务器根据SessionID在自己的存储中查找相关用户信息，并完成验证过程。 那么用户登陆的过程也就是用户对服务器提交用户名、密码等信息，获取SessionID的过程。</p>
            </section>

            <section>
                <p>
                    LocalStorage与SesstionStorage
                </p>
                <p>
                    两者用法相同：
                </p>

                <pre>
                        <code class="hljs javascript">
                                // 保存数据到sessionStorage
                                sessionStorage.setItem('key', 'value');
                            
                                // 从sessionStorage获取数据
                                sessionStorage.getItem('key');
                                sessionStorage.key;
                            
                                // 从sessionStorage删除保存的数据
                                sessionStorage.removeItem('key');
                            
                                // 从sessionStorage删除所有保存的数据
                                sessionStorage.clear();
                            </code>
                            </pre>


            </section>




            <section>
                <h4>COOKIE怎么了？</h4>
                <p>1. 数据大小：作为存储容器，cookie的大小限制在4KB左右。</p>
                <p>2. 安全性问题：由于在HTTP请求中的cookie是明文传递的（HTTPS不是），带来的安全性问题还是很大的。</p>
                <p>3. 网络负担：我们知道cookie会被附加在每个HTTP请求中，在HttpRequest和HttpResponse的header中都是要被传输的， 所以无形中增加了一些不必要的流量损失。</p>
            </section>






            <section>
                <h3>五、编码实战</h3>
            </section>

            <section>
                <h3>六、拓展思考</h3>
            </section>
            <section>
                <h4>各种存储的优缺点？</h4>
                <ul>
                    <li>cookie始终在服务器和浏览器之间来回传送，明文传递，不够安全，且占用了带宽。数据大小受限，只有4kb，对cookie的操作也比较繁琐。</li>
                    <li>session保存在服务器端，数据安全。对数据的操作需要后端协助。</li>
                    <li>localStorage,永久存储且可存入大量数据，但如果数据过多，打开浏览器时会比较卡。</li>
                    <li>sessionStorage，生命周期和作用域都比较窄，这是优点也是缺点。</li>
                </ul>
            </section>



            <section>
                <h3>七、参考文献</h3>
            </section>
            <section>
                <a href="http://sentsin.com/web/663.html" target="_blank">HTML5 WebStorage</a>
                <a href="http://www.yiibai.com/angularjs/angularjs_dependency_injection.html" target="_blank">Cookie/Session机制详解/</a>
                <br>

                <br>
            </section>
            <section>
                <h3>八、更多讨论</h3>
            </section>
            <section>
                <h4>鸣谢</h4>
                <p>感谢大家观看</p>
                <p>BY : 朱士峰</p>
            </section>

        </div>
    </div>

    <script src="https://ptteng.github.io/PPT/lib/reveal/js/head.min.js"></script>
    <script src="https://ptteng.github.io/PPT/lib/reveal/reveal.js"></script>

    <script>
        // 以下为常见配置属性的默认值
        // {
        // 	controls: true, // 是否在右下角展示控制条
        // 	progress: true, // 是否显示演示的进度条
        // 	slideNumber: false, // 是否显示当前幻灯片的页数编号，也可以使用代码slideNumber: 'c / t' ，表示当前页/总页数。
        // 	history: false, // 是否将每个幻灯片改变加入到浏览器的历史记录中去
        // 	keyboard: true, // 是否启用键盘快捷键来导航
        // 	overview: true, // 是否启用幻灯片的概览模式，可使用"Esc"或"o"键来切换概览模式
        // 	center: true, // 是否将幻灯片垂直居中
        // 	touch: true, // 是否在触屏设备上启用触摸滑动切换
        // 	loop: false, // 是否循环演示
        // 	rtl: false, // 是否将演示的方向变成RTL，即从右往左
        // 	fragments: true, // 全局开启和关闭碎片。
        // 	autoSlide: 0, // 两个幻灯片之间自动切换的时间间隔（毫秒），当设置成 0 的时候则禁止自动切换，该值可以被幻灯片上的 ` data-autoslide` 属性覆盖
        // 	transition: 'default', // 切换过渡效果，有none/fade/slide/convex/concave/zoom
        // 	transitionSpeed: 'default', // 过渡速度，default/fast/slow
        // 	mouseWheel: true, //是否启用通过鼠标滚轮来切换幻灯片
        // }
        // 初始化幻灯片
        Reveal.initialize({
            history: true,
            dependencies: [{
                    src: 'https://ptteng.github.io/PPT/plugin/markdown/marked.js'
                },
                {
                    src: 'https://ptteng.github.io/PPT/plugin/markdown/markdown.js'
                },
                {
                    src: 'https://ptteng.github.io/PPT/plugin/notes/notes.js',
                    async: true
                },
                {
                    src: 'https://ptteng.github.io/PPT/plugin/highlight/highlight.js',
                    async: true,
                    callback: function () {
                        hljs.initHighlightingOnLoad();
                    }
                }
            ]
        });
    </script>
</body>

</html>